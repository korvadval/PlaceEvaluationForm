(function(){"use strict";var e={7328:function(e,t,a){var n=a(5130),i=a(6768),l=a(144);a(8111),a(116),a(8237),a(4114),a(1148);const u=new Map;class r{constructor(){}registerField(e,t){u.has(e)||u.set(e,[]),u.get(e).push(t)}validateGroup(e){const t=u.get(e);return!(!t||!t.length)&&t.every((e=>!e()))}}var o=r;const s={class:"ef-bubble-error-container pos-b-0"},d=["innerHTML"];var p={__name:"EfBubbleError",props:{text:{type:String,default:""}},setup(e){return(t,a)=>((0,i.uX)(),(0,i.CE)("div",s,[(0,i.Lk)("div",{class:"ef-bubble-error-message pos-l-0",innerHTML:e.text},null,8,d)]))}},c=a(1241);const v=(0,c.A)(p,[["__scopeId","data-v-53225648"]]);var f=v,m={__name:"EfButton",props:{text:Boolean},setup(e){return(t,a)=>((0,i.uX)(),(0,i.CE)("div",(0,i.v6)({class:["ef-button",{text:e.text}]},t.$attrs),[(0,i.RG)(t.$slots,"default")],16))}};const _=(0,c.A)(m,[["__scopeId","data-v-a1c72210"]]);var g=_,k=a(4232);const b={class:"ef-common-field-container"},R={class:"ef-common-field-caption-name"},y=["tabindex"],h="Обязательное поле.";var K={__name:"EfCommonField",props:(0,i.zz)({name:{type:String,default:""},validation_group:{type:String,default:""},tabindex:{type:Number,default:0},is_autofocus:{type:Boolean,default:!1}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,a=(0,i.fn)(e,"modelValue"),u=(0,l.KR)(null),r=(0,l.KR)(!1),s=(0,l.KR)(!1),d=()=>{m()},p=e=>{s.value=!0,r.value=!1,e.target.select()},c=()=>{s.value=!1,v()},v=()=>(r.value=!String(a.value).length,r.value),m=()=>(new o).registerField(t.validation_group,v);return(0,i.sV)(d),(t,o)=>((0,i.uX)(),(0,i.CE)("div",b,[(0,i.Lk)("div",R,(0,k.v_)(e.name),1),(0,i.bo)((0,i.Lk)("input",(0,i.v6)({"onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e),class:["ef-common-field-field",{error:r.value}]},t.$attrs,{tabindex:e.tabindex,onFocus:p,onBlur:c,onClick:o[1]||(o[1]=e=>r.value=!1),ref_key:"input_ref",ref:u}),null,16,y),[[n.hp,a.value]]),r.value?((0,i.uX)(),(0,i.Wv)((0,l.R1)(f),{key:0,text:h})):(0,i.Q3)("",!0)]))}};const w=(0,c.A)(K,[["__scopeId","data-v-ef5cbb14"]]);var E=w;const x={class:"ef-divider"};function V(e,t){return(0,i.uX)(),(0,i.CE)("div",x)}const F={},X=(0,c.A)(F,[["render",V],["__scopeId","data-v-20943c19"]]);var C=X;const A={class:"ef-evaluation-field-container"},L={class:"ef-evaluation-field-caption"},M={class:"ef-evaluation-field-caption-name"},$={class:"ef-evaluation-field-caption-description"},W=["tabindex"],S=0,U=10,I="Обязательное поле.";var O={__name:"EfEvaluationField",props:(0,i.zz)({name:{type:String,default:""},description:{type:String,default:""},validation_group:{type:String,default:""},tabindex:{type:Number,default:0},is_autofocus:{type:Boolean,default:!1}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,a=(0,i.fn)(e,"modelValue"),u=(0,l.KR)(null),r=(0,l.KR)(!1),s=(0,l.KR)(a.value),d=(0,l.KR)(!1),p=()=>{b(),t.is_autofocus&&setTimeout((()=>u.value.focus()),201)},c=e=>{d.value=!0,r.value=!1,e.target.select()},v=()=>{d.value=!1,g()},m=e=>{let t=e.target.value;t<S?t=S:t>U&&(t=U),s.value=t,a.value=t},_=e=>{"Enter"===e.key&&u.value.blur();const t=/^[0-9]$/.test(e.key),a=["e","Backspace","ArrowLeft","ArrowRight","Tab","Delete"].includes(e.key);t||a||e.preventDefault()},g=()=>(r.value=!String(a.value).length,r.value),b=()=>(new o).registerField(t.validation_group,g);return(0,i.sV)(p),(t,a)=>((0,i.uX)(),(0,i.CE)("div",A,[(0,i.Lk)("div",L,[(0,i.Lk)("div",M,(0,k.v_)(e.name),1),(0,i.Lk)("div",$,(0,k.v_)(e.description),1)]),(0,i.bo)((0,i.Lk)("input",(0,i.v6)({"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),class:["ef-evaluation-field-field",{error:r.value}]},t.$attrs,{min:S,max:U,tabindex:e.tabindex,type:"number",onFocus:c,onBlur:v,onKeydown:_,onInput:m,ref_key:"input_ref",ref:u}),null,16,W),[[n.Jo,s.value]]),r.value?((0,i.uX)(),(0,i.Wv)((0,l.R1)(f),{key:0,text:I})):(0,i.Q3)("",!0)]))}};const T=(0,c.A)(O,[["__scopeId","data-v-3ae4afa6"]]);var z=T;const B={class:"ef-evaluation-header-container"},j={class:"ef-evaluation-header-title"},q={key:0,class:"ef-evaluation-header-impact"};var G={__name:"EfEvaluationHeader",props:{title:{type:String,default:""},impact:{type:Number,default:0}},setup(e){return(t,a)=>((0,i.uX)(),(0,i.CE)("div",B,[(0,i.Lk)("div",j,(0,k.v_)(e.title),1),e.impact?((0,i.uX)(),(0,i.CE)("div",q,(0,k.v_)(e.impact)+"%",1)):(0,i.Q3)("",!0)]))}};const D=(0,c.A)(G,[["__scopeId","data-v-49f7151d"]]);var H=D;const N={class:"ef-page-container"},Q={class:"ef-page-wrapper"},P={class:"ef-page-title"},J={class:"ef-page-fields"},Z={class:"ef-page-actions"};var Y={__name:"EfPage",props:{transition_name:String,page_key:String},setup(e){return(t,a)=>((0,i.uX)(),(0,i.CE)("div",N,[(0,i.Lk)("div",Q,[(0,i.bF)(n.eB,{name:e.transition_name},{default:(0,i.k6)((()=>[((0,i.uX)(),(0,i.CE)("div",{key:e.page_key,class:"ef-page-content"},[(0,i.Lk)("div",P,[(0,i.RG)(t.$slots,"title")]),(0,i.Lk)("div",J,[(0,i.RG)(t.$slots,"fields")])]))])),_:3},8,["name"])]),(0,i.Lk)("div",Z,[(0,i.RG)(t.$slots,"actions")])]))}};const ee=(0,c.A)(Y,[["__scopeId","data-v-57597278"]]);var te=ee,ae={__name:"EfEvaluationForm",props:(0,i.zz)({validation_group:{type:String,default:""}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=(0,i.fn)(e,"modelValue");return(a,n)=>((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.value,((a,n)=>((0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)((0,l.R1)(z),{modelValue:a.input_value.value,"onUpdate:modelValue":e=>a.input_value.value=e,is_autofocus:0===n,validation_group:e.validation_group,name:a.name,description:a.description,tabindex:t.value.length>1?n+1:0},null,8,["modelValue","onUpdate:modelValue","is_autofocus","validation_group","name","description","tabindex"]),(0,i.bF)((0,l.R1)(C))],64)))),256))}};const ne=ae;var ie=ne,le={__name:"EfSendForm",props:(0,i.zz)({validation_group:{type:String,default:""}},{address:{required:!0},addressModifiers:{},date:{required:!0},dateModifiers:{},user_name:{required:!0},user_nameModifiers:{}}),emits:["update:address","update:date","update:user_name"],setup(e){const t=(0,i.fn)(e,"address"),a=((0,i.fn)(e,"date"),(0,i.fn)(e,"user_name"));return(n,u)=>((0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)((0,l.R1)(E),{modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=e=>t.value=e),validation_group:e.validation_group,name:"Адрес",tabindex:1,is_autofocus:""},null,8,["modelValue","validation_group"]),(0,i.bF)((0,l.R1)(C)),(0,i.bF)((0,l.R1)(E),{modelValue:a.value,"onUpdate:modelValue":u[1]||(u[1]=e=>a.value=e),validation_group:e.validation_group,name:"Ответственный",tabindex:2},null,8,["modelValue","validation_group"]),(0,i.bF)((0,l.R1)(C))],64))}};const ue=le;var re=ue,oe=a(1114);class se{constructor(){(0,oe.A)(this,"_bot_token","7674966773:AAFfwue79okvFvMAoaCAk6nMAjgHSMgZTtw"),(0,oe.A)(this,"_chat_id","-4796963240")}sendMessage(e){const t=`https://api.telegram.org/bot${this._bot_token}/sendMessage?chat_id=${this._chat_id}&text=${encodeURIComponent(e)}&parse_mode=Markdown`;fetch(t).then((e=>e.json()))}getUserInfo(){if(window.Telegram&&window.Telegram.WebApp){const e=window.Telegram.WebApp,t=e.initDataUnsafe.user;return{id:t.id,first_name:t.first_name,last_name:t.last_name,full_name:`${t.first_name} ${t.last_name}`}}return null}}var de=se;const pe={key:1};var ce={__name:"EvaluationForm",setup(e){const t=new de,a=(0,l.KR)(null),n=new o,u=(0,l.Kh)({address:"",date:"",user_name:""}),r=[{id:"map_point",impact:20,title:"Местоположение",fields:[{name:"Доступность",description:"лестницы, подъемы, удобство входа",input_value:(0,l.KR)("")},{name:"Проходимость",description:"общее количество пешеходного и автотрафика",input_value:(0,l.KR)("")},{name:"Видимость с улицы",description:"наличие преград, яркость фасада",input_value:(0,l.KR)("")},{name:"Наличие парковки",description:"ближайшие парковочные места и их загруженность",input_value:(0,l.KR)("")}]},{id:"size",impact:10,title:"Размер и соответствие помещения концепции",fields:[{name:"Площадь соответствует формату",description:"6–55 м²",input_value:(0,l.KR)("")}]},{id:"infrastructure",impact:10,title:"Инфраструктура",fields:[{name:"Электроснабжение",description:"мощность, стабильность",input_value:(0,l.KR)("")},{name:"Водоснабжение и канализация",description:"наличие и удобство подключения",input_value:(0,l.KR)("")},{name:"Вентиляция и кондиционирование",description:"подходящие для кофейни",input_value:(0,l.KR)("")}]},{id:"repair",impact:10,title:"Ремонт и состояние помещения",fields:[{name:"Общий ремонт",description:"уровень и требуемые доработки",input_value:(0,l.KR)("")},{name:"Чистота и гигиенические условия",description:"отсутствие мусора, неприятных запахов",input_value:(0,l.KR)("")}]},{id:"rent",impact:15,title:"Арендная плата и условия",fields:[{name:"Размер арендной платы",description:"адекватность рынку",input_value:(0,l.KR)("")},{name:"Длительность аренды",description:"долгосрочность",input_value:(0,l.KR)("")},{name:"Гибкость условий",description:"каникулы, возможность переговоров",input_value:(0,l.KR)("")},{name:"Адекватность арендодателя",description:"готовность к сотрудничеству",input_value:(0,l.KR)("")}]},{id:"location",impact:15,title:"Оценка локации",fields:[{name:"Наличие партнеров/точек притяжения",description:"офисы, ТРЦ, фитнес-клубы и т.д.",input_value:(0,l.KR)("")},{name:"Наличие заинтересованных потребителей",description:"поток целевой аудитории",input_value:(0,l.KR)("")}]},{id:"clients",impact:15,title:"Потенциальные клиенты",fields:[{name:"Количество потенциальных клиентов",description:"оценка по трафику",input_value:(0,l.KR)("")},{name:"Средний доход населения",description:"уровень платежеспособности",input_value:(0,l.KR)("")},{name:"Привлекательность для целевой аудитории",description:"соответствие концепту",input_value:(0,l.KR)("")}]},{id:"marketing",impact:10,title:"Маркетинговые возможности",fields:[{name:"Размещение наружной рекламы",description:"баннеры, витрины",input_value:(0,l.KR)("")},{name:"Возможность проведения промо-акций",description:"зоны для активности",input_value:(0,l.KR)("")}]},{id:"logistics",impact:5,title:"Логистика и поставки",fields:[{name:"Удобство доставки товаров",description:"въезд, разгрузка",input_value:(0,l.KR)("")},{name:"Наличие мест для хранения",description:"подсобка, складские зоны",input_value:(0,l.KR)("")}]},{id:"impressions",impact:10,title:"Общие впечатления",fields:[{name:"Общая субъективная оценка локации",description:"перспективность",input_value:(0,l.KR)("")}]}],s=(0,l.KR)(0),d=(0,i.EW)((()=>{const e=r[s.value];return e||{id:"send_form",title:"Отправка формы"}})),p=(0,l.KR)("slide-left"),c={id:null,first_name:"",last_name:"",full_name:""},v=e=>e.reduce(((e,t)=>e+Number(t.input_value.value)),0),f=()=>{const e=new Date,t={day:"2-digit",month:"long",year:"numeric"};return new Intl.DateTimeFormat("ru-RU",t).format(e)},m=()=>{const e=r.find((e=>"map_point"===e.id)),t=v(e.fields)/4,a=r.find((e=>"size"===e.id)),n=v(a.fields)/1,i=r.find((e=>"infrastructure"===e.id)),l=v(i.fields)/2,u=r.find((e=>"repair"===e.id)),o=v(u.fields)/2,s=r.find((e=>"rent"===e.id)),d=v(s.fields)/2,p=r.find((e=>"location"===e.id)),c=v(p.fields)/2,f=r.find((e=>"clients"===e.id)),m=v(f.fields)/2,_=r.find((e=>"marketing"===e.id)),g=v(_.fields)/2,k=r.find((e=>"logistics"===e.id)),b=v(k.fields)/2,R=r.find((e=>"impressions"===e.id)),y=v(R.fields)/1;return t+n+l+o+d+c+m+g+b+y},_=()=>{const e=r[s.value],t=n.validateGroup(e.id);t&&(a.value.scrollIntoView(),p.value="slide-left",s.value++)},k=()=>{p.value="slide-right",s.value--},b=()=>{const e=`\n${f()}\n\n${u.user_name} поставил оценку \`${m()}\`\nпомещению по адресу: \`${u.address}\`\n`;t.sendMessage(e)},R=e=>{"Enter"===e.key&&_()},y=()=>window.addEventListener("keydown",R),h=()=>{y();const e=t.getUserInfo();e&&(c.id=e.id,c.first_name=e.first_name,c.last_name=e.last_name,c.full_name=e.full_name,u.user_name=e.full_name||"")};return(0,i.sV)(h),(e,t)=>((0,i.uX)(),(0,i.Wv)((0,l.R1)(te),{page_key:d.value.id,transition_name:p.value},{title:(0,i.k6)((()=>[(0,i.Lk)("div",{ref_key:"top_anchor_ref",ref:a},null,512),d.value.title?((0,i.uX)(),(0,i.Wv)((0,l.R1)(H),{key:0,title:d.value.title,impact:d.value.impact},null,8,["title","impact"])):(0,i.Q3)("",!0)])),fields:(0,i.k6)((()=>["send_form"===d.value.id?((0,i.uX)(),(0,i.Wv)((0,l.R1)(re),{key:0,address:u.address,"onUpdate:address":t[0]||(t[0]=e=>u.address=e),date:u.date,"onUpdate:date":t[1]||(t[1]=e=>u.date=e),user_name:u.user_name,"onUpdate:user_name":t[2]||(t[2]=e=>u.user_name=e)},null,8,["address","date","user_name"])):((0,i.uX)(),(0,i.Wv)((0,l.R1)(ie),{key:1,modelValue:d.value.fields,"onUpdate:modelValue":t[3]||(t[3]=e=>d.value.fields=e),validation_group:d.value.id},null,8,["modelValue","validation_group"]))])),actions:(0,i.k6)((()=>[s.value>0?((0,i.uX)(),(0,i.Wv)((0,l.R1)(g),{key:0,onClick:k,style:{"min-width":"120px"},text:""},{default:(0,i.k6)((()=>t[4]||(t[4]=[(0,i.eW)(" Назад ")]))),_:1})):((0,i.uX)(),(0,i.CE)("div",pe)),"send_form"===d.value.id?((0,i.uX)(),(0,i.Wv)((0,l.R1)(g),{key:2,onClick:b,style:{"min-width":"180px"}},{default:(0,i.k6)((()=>t[5]||(t[5]=[(0,i.eW)(" Отправить ")]))),_:1})):((0,i.uX)(),(0,i.Wv)((0,l.R1)(g),{key:3,onClick:_,style:{"min-width":"120px"}},{default:(0,i.k6)((()=>t[6]||(t[6]=[(0,i.eW)(" Далее ")]))),_:1}))])),_:1},8,["page_key","transition_name"]))}};const ve=ce;var fe=ve,me={__name:"App",setup(e){return(e,t)=>((0,i.uX)(),(0,i.Wv)((0,l.R1)(fe)))}};const _e=me;var ge=_e;(0,n.Ef)(ge).mount("#app")}},t={};function a(n){var i=t[n];if(void 0!==i)return i.exports;var l=t[n]={exports:{}};return e[n].call(l.exports,l,l.exports,a),l.exports}a.m=e,function(){var e=[];a.O=function(t,n,i,l){if(!n){var u=1/0;for(d=0;d<e.length;d++){n=e[d][0],i=e[d][1],l=e[d][2];for(var r=!0,o=0;o<n.length;o++)(!1&l||u>=l)&&Object.keys(a.O).every((function(e){return a.O[e](n[o])}))?n.splice(o--,1):(r=!1,l<u&&(u=l));if(r){e.splice(d--,1);var s=i();void 0!==s&&(t=s)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[n,i,l]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,l,u=n[0],r=n[1],o=n[2],s=0;if(u.some((function(t){return 0!==e[t]}))){for(i in r)a.o(r,i)&&(a.m[i]=r[i]);if(o)var d=o(a)}for(t&&t(n);s<u.length;s++)l=u[s],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(d)},n=self["webpackChunkplace_evaluation_form"]=self["webpackChunkplace_evaluation_form"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(7328)}));n=a.O(n)})();
//# sourceMappingURL=app.b51dead8.js.map