(function(){"use strict";var e={3657:function(e,a,t){var n=t(5130),i=t(6768),l=t(144);t(8111),t(116),t(7588),t(8237),t(4114),t(1148);const u=new Map;class s{constructor(){}registerField(e,a){u.has(e)||u.set(e,[]),u.get(e).push(a)}validateGroup(e){const a=u.get(e);return!(!a||!a.length)&&a.every((e=>!e()))}}var r=s;const o={class:"ef-bubble-error-container pos-b-0"},d=["innerHTML"];var c={__name:"EfBubbleError",props:{text:{type:String,default:""}},setup(e){return(a,t)=>((0,i.uX)(),(0,i.CE)("div",o,[(0,i.Lk)("div",{class:"ef-bubble-error-message pos-l-0",innerHTML:e.text},null,8,d)]))}},p=t(1241);const v=(0,p.A)(c,[["__scopeId","data-v-53225648"]]);var f=v,m={__name:"EfButton",props:{text:Boolean,disabled:Boolean},setup(e){return(a,t)=>((0,i.uX)(),(0,i.CE)("div",(0,i.v6)({class:["ef-button",{text:e.text,disabled:e.disabled}]},a.$attrs),[(0,i.RG)(a.$slots,"default")],16))}};const _=(0,p.A)(m,[["__scopeId","data-v-6e3e3625"]]);var g=_,b=t(4232);const k={class:"ef-common-field-container"},R={class:"ef-common-field-caption-name"},y=["tabindex"],h="Обязательное поле.";var K={__name:"EfCommonField",props:(0,i.zz)({name:{type:String,default:""},validation_group:{type:String,default:""},tabindex:{type:Number,default:0},is_autofocus:{type:Boolean,default:!1}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const a=e,t=(0,i.fn)(e,"modelValue"),u=(0,l.KR)(null),s=(0,l.KR)(!1),o=(0,l.KR)(!1),d=()=>{m()},c=e=>{o.value=!0,s.value=!1,e.target.select()},p=()=>{o.value=!1,v()},v=()=>(s.value=!String(t.value).length,s.value),m=()=>(new r).registerField(a.validation_group,v);return(0,i.sV)(d),(a,r)=>((0,i.uX)(),(0,i.CE)("div",k,[(0,i.Lk)("div",R,(0,b.v_)(e.name),1),(0,i.bo)((0,i.Lk)("input",(0,i.v6)({"onUpdate:modelValue":r[0]||(r[0]=e=>t.value=e),class:["ef-common-field-field",{error:s.value}]},a.$attrs,{tabindex:e.tabindex,onFocus:c,onBlur:p,onClick:r[1]||(r[1]=e=>s.value=!1),ref_key:"input_ref",ref:u}),null,16,y),[[n.hp,t.value]]),s.value?((0,i.uX)(),(0,i.Wv)((0,l.R1)(f),{key:0,text:h})):(0,i.Q3)("",!0)]))}};const E=(0,p.A)(K,[["__scopeId","data-v-ef5cbb14"]]);var w=E;const x={class:"ef-divider"};function F(e,a){return(0,i.uX)(),(0,i.CE)("div",x)}const X={},V=(0,p.A)(X,[["render",F],["__scopeId","data-v-20943c19"]]);var C=V;const A={class:"ef-evaluation-field-container"},W={class:"ef-evaluation-field-caption"},L={class:"ef-evaluation-field-caption-name"},S={class:"ef-evaluation-field-caption-description"},$=["tabindex"],M=0,I=10,U="Обязательное поле.";var B={__name:"EfEvaluationField",props:(0,i.zz)({name:{type:String,default:""},description:{type:String,default:""},validation_group:{type:String,default:""},tabindex:{type:Number,default:0},is_autofocus:{type:Boolean,default:!1}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const a=e,t=(0,i.fn)(e,"modelValue"),u=(0,l.KR)(null),s=(0,l.KR)(!1),o=(0,l.KR)(t.value),d=(0,l.KR)(!1),c=()=>{k(),a.is_autofocus&&setTimeout((()=>u.value.focus()),350)},p=e=>{d.value=!0,s.value=!1,e.target.select()},v=()=>{d.value=!1,g()},m=e=>{let a=e.target.value;a<M?a=M:a>I&&(a=I),o.value=a,t.value=a},_=e=>{"Enter"===e.key&&u.value.blur();const a=/^[0-9]$/.test(e.key),t=["e","Backspace","ArrowLeft","ArrowRight","Tab","Delete"].includes(e.key);a||t||e.preventDefault()},g=()=>(s.value=!String(t.value).length,s.value),k=()=>(new r).registerField(a.validation_group,g);return(0,i.sV)(c),(a,t)=>((0,i.uX)(),(0,i.CE)("div",A,[(0,i.Lk)("div",W,[(0,i.Lk)("div",L,(0,b.v_)(e.name),1),(0,i.Lk)("div",S,(0,b.v_)(e.description),1)]),(0,i.bo)((0,i.Lk)("input",(0,i.v6)({"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),class:["ef-evaluation-field-field",{error:s.value}]},a.$attrs,{min:M,max:I,tabindex:e.tabindex,type:"number",onFocus:p,onBlur:v,onKeydown:_,onInput:m,ref_key:"input_ref",ref:u}),null,16,$),[[n.Jo,o.value]]),s.value?((0,i.uX)(),(0,i.Wv)((0,l.R1)(f),{key:0,text:U})):(0,i.Q3)("",!0)]))}};const O=(0,p.A)(B,[["__scopeId","data-v-96d2922a"]]);var T=O;const z={class:"ef-evaluation-header-container"},j={class:"ef-evaluation-header-title"},G={key:0,class:"ef-evaluation-header-impact"};var q={__name:"EfEvaluationHeader",props:{title:{type:String,default:""},impact:{type:Number,default:0}},setup(e){return(a,t)=>((0,i.uX)(),(0,i.CE)("div",z,[(0,i.Lk)("div",j,(0,b.v_)(e.title),1),e.impact?((0,i.uX)(),(0,i.CE)("div",G,(0,b.v_)(e.impact)+"%",1)):(0,i.Q3)("",!0)]))}};const D=(0,p.A)(q,[["__scopeId","data-v-49f7151d"]]);var Q=D;const H={class:"ef-page-container"},N={class:"ef-page-wrapper"},P={class:"ef-page-title"},J={class:"ef-page-fields"},Z={class:"ef-page-actions"};var Y={__name:"EfPage",props:{transition_name:String,page_key:String},setup(e){return(a,t)=>((0,i.uX)(),(0,i.CE)("div",H,[(0,i.Lk)("div",N,[(0,i.bF)(n.eB,{name:e.transition_name},{default:(0,i.k6)((()=>[((0,i.uX)(),(0,i.CE)("div",{key:e.page_key,class:"ef-page-content"},[(0,i.Lk)("div",P,[(0,i.RG)(a.$slots,"title")]),(0,i.Lk)("div",J,[(0,i.RG)(a.$slots,"fields")])]))])),_:3},8,["name"])]),(0,i.Lk)("div",Z,[(0,i.RG)(a.$slots,"actions")])]))}};const ee=(0,p.A)(Y,[["__scopeId","data-v-d12abadc"]]);var ae=ee;const te={class:"ef-success-sent-container"};var ne={__name:"EfSuccessSent",emits:["restartForm"],setup(e,{emit:a}){const t=a;return(e,a)=>((0,i.uX)(),(0,i.CE)("div",te,[a[2]||(a[2]=(0,i.Lk)("div",{class:"ef-success-sent-text"},"Отчет успешно отправлен",-1)),(0,i.bF)((0,l.R1)(g),{onClick:a[0]||(a[0]=e=>t("restartForm"))},{default:(0,i.k6)((()=>a[1]||(a[1]=[(0,i.eW)("Вернуться в начало")]))),_:1})]))}};const ie=(0,p.A)(ne,[["__scopeId","data-v-3a4e95fc"]]);var le=ie,ue={__name:"EfEvaluationForm",props:(0,i.zz)({validation_group:{type:String,default:""}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const a=(0,i.fn)(e,"modelValue");return(t,n)=>((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.value,((t,n)=>((0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)((0,l.R1)(T),{modelValue:t.input_value.value,"onUpdate:modelValue":e=>t.input_value.value=e,is_autofocus:0===n,validation_group:e.validation_group,name:t.name,description:t.description,tabindex:a.value.length>1?n+1:0},null,8,["modelValue","onUpdate:modelValue","is_autofocus","validation_group","name","description","tabindex"]),(0,i.bF)((0,l.R1)(C))],64)))),256))}};const se=ue;var re=se;const oe={class:"ef-send-form-container"},de={key:0,class:"ef-send-form-disabled"};var ce={__name:"EfSendForm",props:(0,i.zz)({validation_group:{type:String,default:""},disabled:{type:Boolean,default:!1}},{address:{required:!0},addressModifiers:{},user_name:{required:!0},user_nameModifiers:{}}),emits:["update:address","update:user_name"],setup(e){const a=(0,i.fn)(e,"address"),t=(0,i.fn)(e,"user_name");return(n,u)=>((0,i.uX)(),(0,i.CE)("div",oe,[(0,i.bF)((0,l.R1)(w),{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=e=>a.value=e),validation_group:e.validation_group,name:"Адрес",tabindex:1,is_autofocus:""},null,8,["modelValue","validation_group"]),(0,i.bF)((0,l.R1)(C)),(0,i.bF)((0,l.R1)(w),{modelValue:t.value,"onUpdate:modelValue":u[1]||(u[1]=e=>t.value=e),validation_group:e.validation_group,name:"Ответственный",tabindex:2},null,8,["modelValue","validation_group"]),(0,i.bF)((0,l.R1)(C)),e.disabled?((0,i.uX)(),(0,i.CE)("div",de)):(0,i.Q3)("",!0)]))}};const pe=(0,p.A)(ce,[["__scopeId","data-v-6a06bc0a"]]);var ve=pe,fe=t(1114);class me{constructor(){(0,fe.A)(this,"_bot_token","7674966773:AAFfwue79okvFvMAoaCAk6nMAjgHSMgZTtw"),(0,fe.A)(this,"_chat_id","-4796963240")}sendMessage(e){const a=`https://api.telegram.org/bot${this._bot_token}/sendMessage?chat_id=${this._chat_id}&text=${encodeURIComponent(e)}&parse_mode=Markdown`;return fetch(a).then((e=>e.json()))}getUserInfo(){if(window.Telegram&&window.Telegram.WebApp){const e=window.Telegram.WebApp,a=e.initDataUnsafe.user;return a?{id:a.id,first_name:a.first_name,last_name:a.last_name,full_name:`${a.first_name} ${a.last_name}`}:null}return null}}var _e=me;const ge={key:1};var be={__name:"EvaluationForm",setup(e){const a=new _e,t=new r,n=(0,l.Kh)({address:"",user_name:""}),u=[{id:"map_point",impact:20,title:"Местоположение",fields:[{name:"Доступность",description:"лестницы, подъемы, удобство входа",input_value:(0,l.KR)("")},{name:"Проходимость",description:"общее количество пешеходного и автотрафика",input_value:(0,l.KR)("")},{name:"Видимость с улицы",description:"наличие преград, яркость фасада",input_value:(0,l.KR)("")},{name:"Наличие парковки",description:"ближайшие парковочные места и их загруженность",input_value:(0,l.KR)("")}]},{id:"size",impact:10,title:"Размер и соответствие помещения концепции",fields:[{name:"Площадь соответствует формату",description:"6–55 м²",input_value:(0,l.KR)("")}]},{id:"infrastructure",impact:10,title:"Инфраструктура",fields:[{name:"Электроснабжение",description:"мощность, стабильность",input_value:(0,l.KR)("")},{name:"Водоснабжение и канализация",description:"наличие и удобство подключения",input_value:(0,l.KR)("")},{name:"Вентиляция и кондиционирование",description:"подходящие для кофейни",input_value:(0,l.KR)("")}]},{id:"repair",impact:10,title:"Ремонт и состояние помещения",fields:[{name:"Общий ремонт",description:"уровень и требуемые доработки",input_value:(0,l.KR)("")},{name:"Чистота и гигиенические условия",description:"отсутствие мусора, неприятных запахов",input_value:(0,l.KR)("")}]},{id:"rent",impact:15,title:"Арендная плата и условия",fields:[{name:"Размер арендной платы",description:"адекватность рынку",input_value:(0,l.KR)("")},{name:"Длительность аренды",description:"долгосрочность",input_value:(0,l.KR)("")},{name:"Гибкость условий",description:"каникулы, возможность переговоров",input_value:(0,l.KR)("")},{name:"Адекватность арендодателя",description:"готовность к сотрудничеству",input_value:(0,l.KR)("")}]},{id:"location",impact:15,title:"Оценка локации",fields:[{name:"Наличие партнеров/точек притяжения",description:"офисы, ТРЦ, фитнес-клубы и т.д.",input_value:(0,l.KR)("")},{name:"Наличие заинтересованных потребителей",description:"поток целевой аудитории",input_value:(0,l.KR)("")}]},{id:"clients",impact:15,title:"Потенциальные клиенты",fields:[{name:"Количество потенциальных клиентов",description:"оценка по трафику",input_value:(0,l.KR)("")},{name:"Средний доход населения",description:"уровень платежеспособности",input_value:(0,l.KR)("")},{name:"Привлекательность для целевой аудитории",description:"соответствие концепту",input_value:(0,l.KR)("")}]},{id:"marketing",impact:10,title:"Маркетинговые возможности",fields:[{name:"Размещение наружной рекламы",description:"баннеры, витрины",input_value:(0,l.KR)("")},{name:"Возможность проведения промо-акций",description:"зоны для активности",input_value:(0,l.KR)("")}]},{id:"logistics",impact:5,title:"Логистика и поставки",fields:[{name:"Удобство доставки товаров",description:"въезд, разгрузка",input_value:(0,l.KR)("")},{name:"Наличие мест для хранения",description:"подсобка, складские зоны",input_value:(0,l.KR)("")}]},{id:"impressions",impact:10,title:"Общие впечатления",fields:[{name:"Общая субъективная оценка локации",description:"перспективность",input_value:(0,l.KR)("")}]}],s=(0,l.KR)(0),o=(0,i.EW)((()=>{const e=u[s.value];return e||("send_form"===o.value.id?{id:"success_sent"}:{id:"send_form",title:"Отправка формы"})})),d=(0,l.KR)("slide-left"),c=(0,l.KR)(!1),p={id:null,first_name:"",last_name:"",full_name:""},v=e=>e.reduce(((e,a)=>e+Number(a.input_value.value)),0),f=()=>{const e=new Date,a={day:"2-digit",month:"long",year:"numeric"};return new Intl.DateTimeFormat("ru-RU",a).format(e)},m=()=>{const e=u.find((e=>"map_point"===e.id)),a=v(e.fields)/4,t=u.find((e=>"size"===e.id)),n=v(t.fields)/1,i=u.find((e=>"infrastructure"===e.id)),l=v(i.fields)/2,s=u.find((e=>"repair"===e.id)),r=v(s.fields)/2,o=u.find((e=>"rent"===e.id)),d=v(o.fields)/2,c=u.find((e=>"location"===e.id)),p=v(c.fields)/2,f=u.find((e=>"clients"===e.id)),m=v(f.fields)/2,_=u.find((e=>"marketing"===e.id)),g=v(_.fields)/2,b=u.find((e=>"logistics"===e.id)),k=v(b.fields)/2,R=u.find((e=>"impressions"===e.id)),y=v(R.fields)/1;return a+n+l+r+d+p+m+g+k+y},_=(e=!0)=>{if(e){const e=u[s.value],a=t.validateGroup(e.id);if(!a)return}d.value="slide-left",s.value++},b=()=>{d.value="slide-right",s.value--},k=async()=>{const e=`\n${f()}\n\n${n.user_name} поставил оценку \`${m()}\`\nпомещению по адресу: \`${n.address}\`\n`;c.value=!0,await a.sendMessage(e),c.value=!1,_(!1)},R=()=>{n.user_name=p.full_name||"",n.address="",u.forEach((e=>{e.fields.forEach((e=>{e.input_value.value=""}))}))},y=e=>{"Enter"===e.key&&_()},h=()=>{R(),s.value=0},K=()=>window.addEventListener("keydown",y),E=()=>{K();const e=a.getUserInfo();e&&(p.id=e.id,p.first_name=e.first_name,p.last_name=e.last_name,p.full_name=e.full_name,n.user_name=e.full_name||"")};return(0,i.sV)(E),(e,a)=>((0,i.uX)(),(0,i.Wv)((0,l.R1)(ae),{page_key:o.value.id,transition_name:d.value},(0,i.eX)({title:(0,i.k6)((()=>[o.value.title?((0,i.uX)(),(0,i.Wv)((0,l.R1)(Q),{key:0,title:o.value.title,impact:o.value.impact},null,8,["title","impact"])):(0,i.Q3)("",!0)])),fields:(0,i.k6)((()=>["success_sent"!==o.value.id?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},["send_form"===o.value.id?((0,i.uX)(),(0,i.Wv)((0,l.R1)(ve),{key:0,address:n.address,"onUpdate:address":a[0]||(a[0]=e=>n.address=e),user_name:n.user_name,"onUpdate:user_name":a[1]||(a[1]=e=>n.user_name=e),disabled:c.value},null,8,["address","user_name","disabled"])):((0,i.uX)(),(0,i.Wv)((0,l.R1)(re),{key:1,modelValue:o.value.fields,"onUpdate:modelValue":a[2]||(a[2]=e=>o.value.fields=e),validation_group:o.value.id},null,8,["modelValue","validation_group"]))],64)):((0,i.uX)(),(0,i.Wv)((0,l.R1)(le),{key:1,onRestartForm:h}))])),_:2},["success_sent"!==o.value.id?{name:"actions",fn:(0,i.k6)((()=>[s.value>0?((0,i.uX)(),(0,i.Wv)((0,l.R1)(g),{key:0,onClick:b,style:{"min-width":"120px"},text:"",disabled:c.value},{default:(0,i.k6)((()=>a[3]||(a[3]=[(0,i.eW)(" Назад ")]))),_:1},8,["disabled"])):((0,i.uX)(),(0,i.CE)("div",ge)),"send_form"===o.value.id?((0,i.uX)(),(0,i.Wv)((0,l.R1)(g),{key:2,onClick:k,style:{"min-width":"180px"},disabled:c.value},{default:(0,i.k6)((()=>a[4]||(a[4]=[(0,i.eW)(" Отправить ")]))),_:1},8,["disabled"])):((0,i.uX)(),(0,i.Wv)((0,l.R1)(g),{key:3,onClick:_,style:{"min-width":"120px"},disabled:c.value},{default:(0,i.k6)((()=>a[5]||(a[5]=[(0,i.eW)(" Далее ")]))),_:1},8,["disabled"]))])),key:"0"}:void 0]),1032,["page_key","transition_name"]))}};const ke=be;var Re=ke,ye={__name:"App",setup(e){return(e,a)=>((0,i.uX)(),(0,i.Wv)((0,l.R1)(Re)))}};const he=ye;var Ke=he;(0,n.Ef)(Ke).mount("#app")}},a={};function t(n){var i=a[n];if(void 0!==i)return i.exports;var l=a[n]={exports:{}};return e[n].call(l.exports,l,l.exports,t),l.exports}t.m=e,function(){var e=[];t.O=function(a,n,i,l){if(!n){var u=1/0;for(d=0;d<e.length;d++){n=e[d][0],i=e[d][1],l=e[d][2];for(var s=!0,r=0;r<n.length;r++)(!1&l||u>=l)&&Object.keys(t.O).every((function(e){return t.O[e](n[r])}))?n.splice(r--,1):(s=!1,l<u&&(u=l));if(s){e.splice(d--,1);var o=i();void 0!==o&&(a=o)}}return a}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[n,i,l]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,n){var i,l,u=n[0],s=n[1],r=n[2],o=0;if(u.some((function(a){return 0!==e[a]}))){for(i in s)t.o(s,i)&&(t.m[i]=s[i]);if(r)var d=r(t)}for(a&&a(n);o<u.length;o++)l=u[o],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(d)},n=self["webpackChunkplace_evaluation_form"]=self["webpackChunkplace_evaluation_form"]||[];n.forEach(a.bind(null,0)),n.push=a.bind(null,n.push.bind(n))}();var n=t.O(void 0,[504],(function(){return t(3657)}));n=t.O(n)})();
//# sourceMappingURL=app.9b93716d.js.map