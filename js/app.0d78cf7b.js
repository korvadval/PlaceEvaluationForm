(function(){"use strict";var e={3704:function(e,t,a){var n=a(5130),i=a(6768),l=a(144);a(8111),a(116),a(7588),a(8237),a(4114),a(1148);const u=new Map;class o{constructor(){}registerField(e,t){u.has(e)||u.set(e,[]),u.get(e).push(t)}validateGroup(e){const t=u.get(e);return!(!t||!t.length)&&t.every((e=>!e()))}}var s=o;const r={class:"ef-bubble-error-container pos-b-0"},d=["innerHTML"];var c={__name:"EfBubbleError",props:{text:{type:String,default:""}},setup(e){return(t,a)=>((0,i.uX)(),(0,i.CE)("div",r,[(0,i.Lk)("div",{class:"ef-bubble-error-message pos-l-0",innerHTML:e.text},null,8,d)]))}},p=a(1241);const v=(0,p.A)(c,[["__scopeId","data-v-53225648"]]);var m=v,f={__name:"EfButton",props:{text:Boolean,disabled:Boolean},setup(e){return(t,a)=>((0,i.uX)(),(0,i.CE)("div",(0,i.v6)({class:["ef-button",{text:e.text,disabled:e.disabled}]},t.$attrs),[(0,i.RG)(t.$slots,"default")],16))}};const _=(0,p.A)(f,[["__scopeId","data-v-6e3e3625"]]);var g=_,b=a(4232);const y={class:"ef-common-field-container"},k={class:"ef-common-field-caption-name"},R=["tabindex"],h=["tabindex"],x="Обязательное поле.";var E={__name:"EfCommonField",props:(0,i.zz)({name:{type:String,default:""},validation_group:{type:String,default:""},tabindex:{type:Number,default:0},is_autofocus:{type:Boolean,default:!1},is_textarea:{type:Boolean,default:!1}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,a=(0,i.fn)(e,"modelValue"),u=(0,l.KR)(null),o=(0,l.KR)(null),r=(0,l.KR)(!1),d=()=>{_(),t.is_autofocus&&setTimeout((()=>u.value.focus()),201),t.is_textarea&&p()},c=e=>{r.value=!1,e.target.select()},p=()=>{const e=o.value;e&&(e.style.height="auto",e.style.height=e.scrollHeight+"px")},v=()=>f(),f=()=>(r.value=!String(a.value).length,r.value),_=()=>(new s).registerField(t.validation_group,f);return(0,i.sV)(d),(t,s)=>((0,i.uX)(),(0,i.CE)("div",y,[(0,i.Lk)("div",k,(0,b.v_)(e.name),1),e.is_textarea?(0,i.Q3)("",!0):(0,i.bo)(((0,i.uX)(),(0,i.CE)("input",(0,i.v6)({key:0,"onUpdate:modelValue":s[0]||(s[0]=e=>a.value=e),class:["ef-common-field-input",{error:r.value}]},t.$attrs,{tabindex:e.tabindex,onFocus:c,onBlur:v,onClick:s[1]||(s[1]=e=>r.value=!1),ref_key:"input_ref",ref:u}),null,16,R)),[[n.hp,a.value]]),e.is_textarea?(0,i.bo)(((0,i.uX)(),(0,i.CE)("textarea",(0,i.v6)({key:1,"onUpdate:modelValue":s[2]||(s[2]=e=>a.value=e),class:["ef-common-field-textarea",{error:r.value}]},t.$attrs,{tabindex:e.tabindex,onInput:p,onFocus:c,onBlur:v,onClick:s[3]||(s[3]=e=>r.value=!1),onKeydown:s[4]||(s[4]=(0,n.jR)((0,n.D$)((()=>{}),["stop"]),["enter"])),ref_key:"textarea_ref",ref:o}),null,16,h)),[[n.Jo,a.value]]):(0,i.Q3)("",!0),r.value?((0,i.uX)(),(0,i.Wv)((0,l.R1)(m),{key:2,text:x})):(0,i.Q3)("",!0)]))}};const K=(0,p.A)(E,[["__scopeId","data-v-1faa48d4"]]);var w=K;const V={class:"ef-divider"};function F(e,t){return(0,i.uX)(),(0,i.CE)("div",V)}const X={},C=(0,p.A)(X,[["render",F],["__scopeId","data-v-20943c19"]]);var $=C;const W={class:"ef-evaluation-field-container"},A={class:"ef-evaluation-field-caption"},I={class:"ef-evaluation-field-caption-name"},L={class:"ef-evaluation-field-caption-description"},U=["tabindex"],S=0,M=10,B="Обязательное поле.";var O={__name:"EfEvaluationField",props:(0,i.zz)({name:{type:String,default:""},description:{type:String,default:""},validation_group:{type:String,default:""},tabindex:{type:Number,default:0},is_autofocus:{type:Boolean,default:!1}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,a=(0,i.fn)(e,"modelValue"),u=(0,l.KR)(null),o=(0,l.KR)(!1),r=(0,l.KR)(a.value),d=(0,l.KR)(!1),c=()=>{y(),t.is_autofocus&&setTimeout((()=>u.value.focus()),350)},p=e=>{d.value=!0,o.value=!1,e.target.select()},v=()=>{d.value=!1,g()},f=e=>{let t=e.target.value;t<S?t=S:t>M&&(t=M),r.value=t,a.value=t},_=e=>{"Enter"===e.key&&u.value.blur();const t=/^[0-9]$/.test(e.key),a=["e","Backspace","ArrowLeft","ArrowRight","Tab","Delete"].includes(e.key);t||a||e.preventDefault()},g=()=>(o.value=!String(a.value).length,o.value),y=()=>(new s).registerField(t.validation_group,g);return(0,i.sV)(c),(t,a)=>((0,i.uX)(),(0,i.CE)("div",W,[(0,i.Lk)("div",A,[(0,i.Lk)("div",I,(0,b.v_)(e.name),1),(0,i.Lk)("div",L,(0,b.v_)(e.description),1)]),(0,i.bo)((0,i.Lk)("input",(0,i.v6)({"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e),class:["ef-evaluation-field-field",{error:o.value}]},t.$attrs,{min:S,max:M,tabindex:e.tabindex,type:"number",onFocus:p,onBlur:v,onKeydown:_,onInput:f,ref_key:"input_ref",ref:u}),null,16,U),[[n.Jo,r.value]]),o.value?((0,i.uX)(),(0,i.Wv)((0,l.R1)(m),{key:0,text:B})):(0,i.Q3)("",!0)]))}};const z=(0,p.A)(O,[["__scopeId","data-v-96d2922a"]]);var T=z;const j={class:"ef-evaluation-header-container"},Q={class:"ef-evaluation-header-title"},q={key:0,class:"ef-evaluation-header-impact"};var D={__name:"EfEvaluationHeader",props:{title:{type:String,default:""},impact:{type:Number,default:0}},setup(e){return(t,a)=>((0,i.uX)(),(0,i.CE)("div",j,[(0,i.Lk)("div",Q,(0,b.v_)(e.title),1),e.impact?((0,i.uX)(),(0,i.CE)("div",q,(0,b.v_)(e.impact)+"%",1)):(0,i.Q3)("",!0)]))}};const G=(0,p.A)(D,[["__scopeId","data-v-49f7151d"]]);var H=G;const N={class:"ef-page-container"},P={class:"ef-page-wrapper"},J={class:"ef-page-title"},Y={class:"ef-page-fields"},Z={class:"ef-page-actions"};var ee={__name:"EfPage",props:{transition_name:String,page_key:String},setup(e){return(t,a)=>((0,i.uX)(),(0,i.CE)("div",N,[(0,i.Lk)("div",P,[(0,i.bF)(n.eB,{name:e.transition_name},{default:(0,i.k6)((()=>[((0,i.uX)(),(0,i.CE)("div",{key:e.page_key,class:"ef-page-content"},[(0,i.Lk)("div",J,[(0,i.RG)(t.$slots,"title")]),(0,i.Lk)("div",Y,[(0,i.RG)(t.$slots,"fields")])]))])),_:3},8,["name"])]),(0,i.Lk)("div",Z,[(0,i.RG)(t.$slots,"actions")])]))}};const te=(0,p.A)(ee,[["__scopeId","data-v-d12abadc"]]);var ae=te;const ne={class:"ef-success-sent-container"};var ie={__name:"EfSuccessSent",emits:["restartForm"],setup(e,{emit:t}){const a=t;return(e,t)=>((0,i.uX)(),(0,i.CE)("div",ne,[t[2]||(t[2]=(0,i.Lk)("div",{class:"ef-success-sent-text"},"Отчет успешно отправлен",-1)),(0,i.bF)((0,l.R1)(g),{onClick:t[0]||(t[0]=e=>a("restartForm"))},{default:(0,i.k6)((()=>t[1]||(t[1]=[(0,i.eW)("Вернуться в начало")]))),_:1})]))}};const le=(0,p.A)(ie,[["__scopeId","data-v-3a4e95fc"]]);var ue=le,oe={__name:"EfEvaluationForm",props:(0,i.zz)({validation_group:{type:String,default:""}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=(0,i.fn)(e,"modelValue");return(a,n)=>((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.value,((a,n)=>((0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)((0,l.R1)(T),{modelValue:a.input_value.value,"onUpdate:modelValue":e=>a.input_value.value=e,is_autofocus:0===n,validation_group:e.validation_group,name:a.name,description:a.description,tabindex:t.value.length>1?n+1:0},null,8,["modelValue","onUpdate:modelValue","is_autofocus","validation_group","name","description","tabindex"]),(0,i.bF)((0,l.R1)($))],64)))),256))}};const se=oe;var re=se;const de={class:"ef-send-form-container"},ce={key:0,class:"ef-send-form-disabled"};var pe={__name:"EfSendForm",props:(0,i.zz)({validation_group:{type:String,default:""},disabled:{type:Boolean,default:!1}},{address:{required:!0},addressModifiers:{},user_name:{required:!0},user_nameModifiers:{},comment:{required:!0},commentModifiers:{}}),emits:["update:address","update:user_name","update:comment"],setup(e){const t=(0,i.fn)(e,"address"),a=(0,i.fn)(e,"user_name"),n=(0,i.fn)(e,"comment");return(u,o)=>((0,i.uX)(),(0,i.CE)("div",de,[(0,i.bF)((0,l.R1)(w),{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=e=>t.value=e),validation_group:e.validation_group,name:"Адрес",tabindex:1,is_autofocus:""},null,8,["modelValue","validation_group"]),(0,i.bF)((0,l.R1)($)),(0,i.bF)((0,l.R1)(w),{modelValue:a.value,"onUpdate:modelValue":o[1]||(o[1]=e=>a.value=e),validation_group:e.validation_group,name:"Ответственный",tabindex:2},null,8,["modelValue","validation_group"]),(0,i.bF)((0,l.R1)($)),(0,i.bF)((0,l.R1)(w),{modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=e=>n.value=e),validation_group:e.validation_group,name:"Комментарий",tabindex:3,is_textarea:""},null,8,["modelValue","validation_group"]),(0,i.bF)((0,l.R1)($)),e.disabled?((0,i.uX)(),(0,i.CE)("div",ce)):(0,i.Q3)("",!0)]))}};const ve=(0,p.A)(pe,[["__scopeId","data-v-585dcf43"]]);var me=ve,fe=a(1114);class _e{constructor(){(0,fe.A)(this,"_bot_token","8140648198:AAFqVjOWI4C26xa8iyIohQOzLeQP_ryx56M"),(0,fe.A)(this,"_chat_id","-1002628140502")}sendMessage(e){const t=`https://api.telegram.org/bot${this._bot_token}/sendMessage?chat_id=${this._chat_id}&text=${encodeURIComponent(e)}&parse_mode=Markdown`;return fetch(t).then((e=>e.json()))}getUserInfo(){if(window.Telegram&&window.Telegram.WebApp){const e=window.Telegram.WebApp,t=e.initDataUnsafe.user;return t?{id:t.id,first_name:t.first_name,last_name:t.last_name,full_name:`${t.first_name} ${t.last_name}`}:null}return null}}var ge=_e;const be={key:1};var ye={__name:"EvaluationForm",setup(e){const t=new ge,a=new s,n=(0,l.Kh)({address:"",user_name:"",comment:""}),u=[{id:"map_point",impact:20,title:"Местоположение",fields:[{name:"Доступность",description:"лестницы, подъемы, удобство входа",input_value:(0,l.KR)("")},{name:"Проходимость",description:"общее количество пешеходного и автотрафика",input_value:(0,l.KR)("")},{name:"Видимость с улицы",description:"наличие преград, яркость фасада",input_value:(0,l.KR)("")},{name:"Наличие парковки",description:"ближайшие парковочные места и их загруженность",input_value:(0,l.KR)("")}]},{id:"size",impact:10,title:"Размер и соответствие помещения концепции",fields:[{name:"Площадь соответствует формату",description:"6–55 м²",input_value:(0,l.KR)("")}]},{id:"infrastructure",impact:10,title:"Инфраструктура",fields:[{name:"Электроснабжение",description:"мощность, стабильность",input_value:(0,l.KR)("")},{name:"Водоснабжение и канализация",description:"наличие и удобство подключения",input_value:(0,l.KR)("")},{name:"Вентиляция и кондиционирование",description:"подходящие для кофейни",input_value:(0,l.KR)("")}]},{id:"repair",impact:10,title:"Ремонт и состояние помещения",fields:[{name:"Общий ремонт",description:"уровень и требуемые доработки",input_value:(0,l.KR)("")},{name:"Чистота и гигиенические условия",description:"отсутствие мусора, неприятных запахов",input_value:(0,l.KR)("")}]},{id:"rent",impact:15,title:"Арендная плата и условия",fields:[{name:"Размер арендной платы",description:"адекватность рынку",input_value:(0,l.KR)("")},{name:"Длительность аренды",description:"долгосрочность",input_value:(0,l.KR)("")},{name:"Гибкость условий",description:"каникулы, возможность переговоров",input_value:(0,l.KR)("")},{name:"Адекватность арендодателя",description:"готовность к сотрудничеству",input_value:(0,l.KR)("")}]},{id:"location",impact:15,title:"Оценка локации",fields:[{name:"Наличие партнеров/точек притяжения",description:"офисы, ТРЦ, фитнес-клубы и т.д.",input_value:(0,l.KR)("")},{name:"Наличие заинтересованных потребителей",description:"поток целевой аудитории",input_value:(0,l.KR)("")}]},{id:"clients",impact:15,title:"Потенциальные клиенты",fields:[{name:"Количество потенциальных клиентов",description:"оценка по трафику",input_value:(0,l.KR)("")},{name:"Средний доход населения",description:"уровень платежеспособности",input_value:(0,l.KR)("")},{name:"Привлекательность для целевой аудитории",description:"соответствие концепту",input_value:(0,l.KR)("")}]},{id:"marketing",impact:10,title:"Маркетинговые возможности",fields:[{name:"Размещение наружной рекламы",description:"баннеры, витрины",input_value:(0,l.KR)("")},{name:"Возможность проведения промо-акций",description:"зоны для активности",input_value:(0,l.KR)("")}]},{id:"logistics",impact:5,title:"Логистика и поставки",fields:[{name:"Удобство доставки товаров",description:"въезд, разгрузка",input_value:(0,l.KR)("")},{name:"Наличие мест для хранения",description:"подсобка, складские зоны",input_value:(0,l.KR)("")}]},{id:"impressions",impact:10,title:"Общие впечатления",fields:[{name:"Общая субъективная оценка локации",description:"перспективность",input_value:(0,l.KR)("")}]}],o=(0,l.KR)(0),r=(0,i.EW)((()=>{const e=u[o.value];return e||("send_form"===r.value.id?{id:"success_sent"}:{id:"send_form",title:"Отправка формы"})})),d=(0,l.KR)("slide-left"),c=(0,l.KR)(!1),p={id:null,first_name:"",last_name:"",full_name:""},v=e=>e.reduce(((e,t)=>e+Number(t.input_value.value)),0),m=()=>{const e=new Date,t={day:"2-digit",month:"long",year:"numeric"};return new Intl.DateTimeFormat("ru-RU",t).format(e)},f=()=>{const e=u.find((e=>"map_point"===e.id)),t=v(e.fields)/4,a=u.find((e=>"size"===e.id)),n=v(a.fields)/1,i=u.find((e=>"infrastructure"===e.id)),l=v(i.fields)/2,o=u.find((e=>"repair"===e.id)),s=v(o.fields)/2,r=u.find((e=>"rent"===e.id)),d=v(r.fields)/2,c=u.find((e=>"location"===e.id)),p=v(c.fields)/2,m=u.find((e=>"clients"===e.id)),f=v(m.fields)/2,_=u.find((e=>"marketing"===e.id)),g=v(_.fields)/2,b=u.find((e=>"logistics"===e.id)),y=v(b.fields)/2,k=u.find((e=>"impressions"===e.id)),R=v(k.fields)/1;return t+n+l+s+d+p+f+g+y+R},_=(e=!0)=>{if(e){const e=u[o.value],t=a.validateGroup(e.id);if(!t)return}d.value="slide-left",o.value++},b=()=>{d.value="slide-right",o.value--},y=async()=>{const e=`\n${m()}\n\n${n.user_name} поставил оценку \`${f()}\`\nпомещению по адресу: \`${n.address}\`\n\nКомментарий:\n${n.comment}\n`;c.value=!0,await t.sendMessage(e),c.value=!1,_(!1)},k=()=>{n.user_name=p.full_name||"",n.address="",u.forEach((e=>{e.fields.forEach((e=>{e.input_value.value=""}))}))},R=e=>{"Enter"===e.key&&_()},h=()=>{k(),o.value=0},x=()=>window.addEventListener("keydown",R),E=()=>{x();const e=t.getUserInfo();e&&(p.id=e.id,p.first_name=e.first_name,p.last_name=e.last_name,p.full_name=e.full_name,n.user_name=e.full_name||"")};return(0,i.sV)(E),(e,t)=>((0,i.uX)(),(0,i.Wv)((0,l.R1)(ae),{page_key:r.value.id,transition_name:d.value},(0,i.eX)({title:(0,i.k6)((()=>[r.value.title?((0,i.uX)(),(0,i.Wv)((0,l.R1)(H),{key:0,title:r.value.title,impact:r.value.impact},null,8,["title","impact"])):(0,i.Q3)("",!0)])),fields:(0,i.k6)((()=>["success_sent"!==r.value.id?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},["send_form"===r.value.id?((0,i.uX)(),(0,i.Wv)((0,l.R1)(me),{key:0,address:n.address,"onUpdate:address":t[0]||(t[0]=e=>n.address=e),user_name:n.user_name,"onUpdate:user_name":t[1]||(t[1]=e=>n.user_name=e),comment:n.comment,"onUpdate:comment":t[2]||(t[2]=e=>n.comment=e),disabled:c.value},null,8,["address","user_name","comment","disabled"])):((0,i.uX)(),(0,i.Wv)((0,l.R1)(re),{key:1,modelValue:r.value.fields,"onUpdate:modelValue":t[3]||(t[3]=e=>r.value.fields=e),validation_group:r.value.id},null,8,["modelValue","validation_group"]))],64)):((0,i.uX)(),(0,i.Wv)((0,l.R1)(ue),{key:1,onRestartForm:h}))])),_:2},["success_sent"!==r.value.id?{name:"actions",fn:(0,i.k6)((()=>[o.value>0?((0,i.uX)(),(0,i.Wv)((0,l.R1)(g),{key:0,onClick:b,style:{"min-width":"120px"},text:"",disabled:c.value},{default:(0,i.k6)((()=>t[4]||(t[4]=[(0,i.eW)(" Назад ")]))),_:1},8,["disabled"])):((0,i.uX)(),(0,i.CE)("div",be)),"send_form"===r.value.id?((0,i.uX)(),(0,i.Wv)((0,l.R1)(g),{key:2,onClick:y,style:{"min-width":"180px"},disabled:c.value},{default:(0,i.k6)((()=>t[5]||(t[5]=[(0,i.eW)(" Отправить ")]))),_:1},8,["disabled"])):((0,i.uX)(),(0,i.Wv)((0,l.R1)(g),{key:3,onClick:_,style:{"min-width":"120px"},disabled:c.value},{default:(0,i.k6)((()=>t[6]||(t[6]=[(0,i.eW)(" Далее ")]))),_:1},8,["disabled"]))])),key:"0"}:void 0]),1032,["page_key","transition_name"]))}};const ke=ye;var Re=ke,he={__name:"App",setup(e){return(e,t)=>((0,i.uX)(),(0,i.Wv)((0,l.R1)(Re)))}};const xe=he;var Ee=xe;(0,n.Ef)(Ee).mount("#app")}},t={};function a(n){var i=t[n];if(void 0!==i)return i.exports;var l=t[n]={exports:{}};return e[n].call(l.exports,l,l.exports,a),l.exports}a.m=e,function(){var e=[];a.O=function(t,n,i,l){if(!n){var u=1/0;for(d=0;d<e.length;d++){n=e[d][0],i=e[d][1],l=e[d][2];for(var o=!0,s=0;s<n.length;s++)(!1&l||u>=l)&&Object.keys(a.O).every((function(e){return a.O[e](n[s])}))?n.splice(s--,1):(o=!1,l<u&&(u=l));if(o){e.splice(d--,1);var r=i();void 0!==r&&(t=r)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[n,i,l]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,l,u=n[0],o=n[1],s=n[2],r=0;if(u.some((function(t){return 0!==e[t]}))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(s)var d=s(a)}for(t&&t(n);r<u.length;r++)l=u[r],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(d)},n=self["webpackChunkplace_evaluation_form"]=self["webpackChunkplace_evaluation_form"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(3704)}));n=a.O(n)})();
//# sourceMappingURL=app.0d78cf7b.js.map